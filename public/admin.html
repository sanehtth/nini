<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>LearnQuest AI â€“ Admin</title>

  <!-- CSS chung -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="dark.css">
  <link rel="stylesheet" href="green-theme.css">
  <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <!-- CSS riÃªng cho Admin (chá»‰ chá»‰nh layout cho gá»n) -->
  <style>
    /* Layout tinh gá»n riÃªng cho trang admin */
    .admin-main {
      padding: 10px 24px 24px;
    }
    .admin-panel h2 {
      margin-bottom: 12px;
    }
    .admin-panel .form-row {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 12px;
    }
    .admin-panel label {
      font-weight: 600;
      font-size: 14px;
    }
    .admin-panel .input {
      width: 100%;
      max-width: 100%;
    }
    .admin-panel textarea.input {
      min-height: 80px;
      resize: vertical;
    }
    .admin-panel .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-top: 4px;
    }
    .admin-panel .two-col {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }
    .admin-panel .two-col .col {
      flex: 1 1 260px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- HEADER -->
    <header>
      <h1>Admin Panel</h1>
      <div class="user-info">
        <button class="profile-btn" onclick="window.location.href='index.html'">
          â¬… Vá» trang chÃ­nh
        </button>

       <button class="profile-btn" id="themeToggleBtn" onclick="toggleTheme()">
  Theme: Default
</button>


        <span id="adminEmail">admin</span>
        <button class="logout-btn" id="logoutBtnAdmin">ÄÄƒng xuáº¥t</button>
      </div>
      <p>Xin chÃ o, <span id="adminEmailText"></span> (admin)</p>
    </header>

    <!-- NAV TOOL -->
    <nav class="admin-nav" style="margin-top: 10px; margin-bottom: 10px;">
      <button class="tab-btn admin-tab active" data-target="panel-api">ğŸ”‘ Nháº­p API</button>
      <button class="tab-btn admin-tab" data-target="panel-char">ğŸ§‘â€ğŸ¨ Prompt CÆ¡ báº£n</button>
      <button class="tab-btn admin-tab" data-target="panel-outfit">ğŸ‘• Prompt Ä‘á»•i outfit</button>
      <button class="tab-btn admin-tab" data-target="panel-story">ğŸ¬ Táº¡o Video - short</button>
      <!-- NEW TAB: Quiz / Make JSON -->
      <button class="tab-btn admin-tab" data-target="panel-json">ğŸ“š Quiz / Make JSON</button>
    </nav>

    <!-- PANELS -->
    <main class="admin-main" style="margin-top: 10px;">

      <!-- PANEL 1: API -->
      <section id="panel-api" class="admin-panel">
        <h2>ğŸ”‘ Cáº¥u hÃ¬nh API</h2>
        <p><b>LÆ°u Ã½ chung:</b> API nÃªn dÃ¹ng cho má»¥c Ä‘Ã­ch cÃ¡ nhÃ¢n. Vá»›i web public, API key nÃªn Ä‘á»ƒ á»Ÿ server (Vercel env / Cloud Functions) Ä‘á»ƒ áº©n key, khÃ´ng Ä‘á»ƒ lá»™ trÃªn client.</p>

        <!-- PHáº¦N A: LOCAL PROFILES (lÆ°u trÃªn mÃ¡y, dÃ¹ng cho nhiá»u tool khÃ¡c) -->
        <h3 style="margin-top: 16px;">A. API local theo Profile (lÆ°u trong trÃ¬nh duyá»‡t)</h3>
        <p style="font-size: 13px;">
          Má»—i profile cÃ³ 3 loáº¡i API (OpenAI / Google AI / Grok). Dá»¯ liá»‡u chá»‰ náº±m trong localStorage cá»§a trÃ¬nh duyá»‡t hiá»‡n táº¡i.
        </p>

        <div class="form-row">
          <label>ID / TÃªn Profile:</label>
          <input id="localProfileId" class="input" placeholder="vd: sane, anhA..." />
        </div>

        <div class="form-row">
          <label>Chá»n nhÃ  cung cáº¥p:</label>
          <select id="apiProvider" class="input">
            <option value="openai">OpenAI</option>
            <option value="gemini">Google AI</option>
            <option value="grok">Grok (xAI)</option>
          </select>
        </div>

        <div class="form-row">
          <label>API Key (sáº½ lÆ°u trong localStorage trÃªn trÃ¬nh duyá»‡t nÃ y):</label>
          <input id="apiKeyInput" class="input" type="password" placeholder="sk-... / AIza... / xai-..." />
        </div>

        <div class="form-row btn-row">
          <button class="main-btn" id="saveApiBtn">ğŸ’¾ LÆ°u local</button>
          <button class="main-btn" id="clearApiBtn">ğŸ§¹ XoÃ¡ local</button>
          <span id="apiStatus" class="small-text"></span>
        </div>

        <!-- A.3 API Ä‘ang dÃ¹ng cho cÃ¡c tool -->
        <div class="form-row">
          <label>API Ä‘ang dÃ¹ng cho cÃ¡c tool (Active provider):</label>
          <div style="display:flex; flex-wrap:wrap; gap:12px; align-items:center;">
            <label>
              <input type="radio"
                     name="activeProvider"
                     value="openai"
                     class="active-provider-radio">
              OpenAI
            </label>

            <label>
              <input type="radio"
                     name="activeProvider"
                     value="gemini"
                     class="active-provider-radio">
              Google AI (Gemini)
            </label>

            <label>
              <input type="radio"
                     name="activeProvider"
                     value="grok"
                     class="active-provider-radio">
              Grok (xAI)
            </label>

            <span class="small-text">
              Äang chá»n: <b id="activeProviderLabel">chÆ°a Ä‘áº·t</b>
            </span>
          </div>
        </div>

        <hr style="margin: 20px 0;">

        <!-- PHáº¦N B: API THEO USER (FIREBASE) -->
        <h3>B. API theo User (lÆ°u trÃªn Firebase /users/&lt;uid&gt;/api)</h3>
        <p style="font-size: 13px;">
          Má»—i tÃ i khoáº£n Ä‘Äƒng nháº­p Firebase sáº½ cÃ³ bá»™ API riÃªng á»Ÿ Realtime Database. Chá»‰ user Ä‘Ã³ (vÃ  báº¡n â€“ chá»§ project trÃªn Firebase Console) má»›i xem Ä‘Æ°á»£c.
        </p>

        <div class="form-row">
          <label>OpenAI API Key:</label>
          <input id="userOpenAIKey" class="input" type="password" placeholder="sk-..." />
        </div>

        <div class="form-row">
          <label>Google AI (Gemini) API Key:</label>
          <input id="userGeminiKey" class="input" type="password" placeholder="AIza..." />
        </div>

        <div class="form-row">
          <label>Grok (xAI) API Key:</label>
          <input id="userGrokKey" class="input" type="password" placeholder="xai-..." />
        </div>

        <div class="form-row btn-row">
          <button class="main-btn" id="saveUserApiBtn">ğŸ’¾ LÆ°u API (Firebase)</button>
          <span id="userApiStatus" class="small-text"></span>
        </div>
      </section>

      <!-- PANEL 2: PROMPT NHÃ‚N Váº¬T -->
      <section id="panel-char" class="admin-panel hidden">
        <h2>ğŸ§‘â€ğŸ¨ Táº¡o prompt CÆ¡ báº£n Ä‘Æ°a vÃ o data ğŸ§‘â€ğŸ¨</h2>
 <p style="margin-bottom: 12px;">
          DÃ¹ng tool riÃªng <code>character.html</code> Ä‘á»ƒ: táº¡o nhÃ¢n vÃ¢t.
        </p>

        <div class="form-row">
          <button type="button"
                  class="main-btn"
                  onclick="window.open('character.html', '_blank')">
            ğŸš€ Tool Táº¡o NhÃ¢n váº­t
          </button>
        </div>

        <p style="margin-top: 16px; font-size: 13px; opacity: 0.8;">
          Gá»£i Ã½: Báº¡n cÃ³ thá»ƒ má»Ÿ tool nÃ y trong tab má»›i cá»§a trÃ¬nh duyá»‡t Ä‘á»ƒ vá»«a xem admin vá»«a chá»‰nh storyboard.
        </p>
        
      </section>

      <!-- PANEL 3: PROMPT OUTFIT -->
      <section id="panel-outfit" class="admin-panel hidden">
        <h2>ğŸ‘• Táº¡o prompt Ä‘á»•i Outfit</h2>

        <div class="two-col">
          <div class="col">
            <div class="form-row">
              <label>MÃ´ táº£ outfit (thÃ´):</label>
              <textarea id="outfitRaw" class="input textarea" rows="4"
                placeholder="VÃ­ dá»¥: Poncho Ä‘á» hoáº¡ tiáº¿t turquoise, mÅ© rá»™ng vÃ nh, tháº¯t lÆ°ng da, boots cao..."></textarea>
            </div>
          </div>

          <div class="col">
            <div class="form-row">
              <label>Kiá»ƒu / vibe:</label>
              <input id="outfitVibe" class="input"
                placeholder="desert adventurer, tribal patterns, warm earthy colors..." />
            </div>
          </div>
        </div>

        <div class="form-row btn-row">
          <button class="main-btn" id="buildOutfitPromptBtn">âœ¨ Táº¡o prompt outfit</button>
          <button class="profile-btn" id="copyOutfitPromptBtn">ğŸ“‹ Copy</button>
        </div>

        <div class="form-row">
          <label>Outfit prompt (káº¿t quáº£):</label>
          <textarea id="outfitFinal" class="input textarea" rows="6"></textarea>
        </div>

        <hr style="margin: 20px 0;">

        <h3>ğŸ”€ GhÃ©p prompt Ä‘á»•i outfit (Character + Outfit)</h3>
        <p>DÃ¹ng character prompt & outfit prompt á»Ÿ trÃªn Ä‘á»ƒ táº¡o final prompt cho AI váº½.</p>

        <div class="form-row btn-row">
          <button class="main-btn" id="buildSwapPromptBtn">ğŸ§¬ Táº¡o final prompt</button>
          <button class="profile-btn" id="copySwapJsonBtn">ğŸ“‹ Copy JSON</button>
        </div>

        <div class="form-row">
          <label>JSON káº¿t quáº£:</label>
          <textarea id="swapJson" class="input textarea" rows="8" readonly></textarea>
        </div>
      </section>

      <!-- PANEL 4: STORYBOARD -->
      <section id="panel-story" class="admin-panel hidden">
        <h2>ğŸ¬ Tool storyboard tá»« bÃ i hÃ¡t / Ã½ tÆ°á»Ÿng</h2>
        <p style="margin-bottom: 12px;">
          DÃ¹ng tool riÃªng <code>makeprompt.html</code> Ä‘á»ƒ: tÃ¡ch lá»i bÃ i hÃ¡t hoáº·c ká»‹ch báº£n thÃ nh cÃ¡c cáº£nh 5 giÃ¢y vÃ  sinh prompt cho Sora / Flow / video AI khÃ¡c.
        </p>

        <div class="form-row">
          <button type="button"
                  class="main-btn"
                  onclick="window.open('makeprompt.html', '_blank')">
            ğŸš€ Má»Ÿ tool tao promt phan canh theo storyboard hoac bai hat (lyrics â†’ shots)
          </button>
        </div>
        <div class="form-row">
          <button type="button"
                  class="main-btn"
                  onclick="window.open('makeprompt_image.html', '_blank')">
            ğŸš€ Má»Ÿ tool tao promt hinh anh theo ADN series 
          </button>
        </div>
        <div class="form-row">
          <button type="button"
                  class="main-btn"
                  onclick="window.open('makeprompt_video.html', '_blank')">
            ğŸš€ Má»Ÿ tool tao promt video theo ADN series 
          </button>
          <div class="form-row">
          <button type="button"
                  class="main-btn"
                  onclick="window.open('xnc_motion_comic_demo/index.html', '_blank')">
            ğŸš€ Má»Ÿ tool tao Motion Comic 2D theo ADN series 
          </button>
        </div>
        </div>
        <p style="margin-top: 16px; font-size: 13px; opacity: 0.8;">
          Gá»£i Ã½: Báº¡n cÃ³ thá»ƒ má»Ÿ tool nÃ y trong tab má»›i cá»§a trÃ¬nh duyá»‡t Ä‘á»ƒ vá»«a xem admin vá»«a chá»‰nh storyboard.
        </p>
      </section>

      <!-- PANEL 5: QUIZ / MAKE JSON -->
      <section id="panel-json" class="admin-panel hidden">
        <h2>ğŸ“š Tool táº¡o JSON Ä‘á» kiá»ƒm tra (MakeJSON)</h2>
        <p style="margin-bottom: 12px;">
          DÃ¹ng <code>makejson.html</code> Ä‘á»ƒ chuyá»ƒn Ä‘á» Word hoáº·c text sang JSON (6 pháº§n:
          tráº¯c nghiá»‡m, hÃ¬nh áº£nh, Ä‘á»c hiá»ƒu, Ä‘iá»n chá»— trá»‘ng, word form, ghÃ©p cÃ¢u / viáº¿t láº¡i cÃ¢u).
          HÃ¬nh pháº§n 2 báº¡n Ä‘á»ƒ trong <code>public/assets/content</code> vá»›i tÃªn file kiá»ƒu
          <code>test1_P2_sign_15.webp</code>.
        </p>

        <div class="form-row">
          <button type="button"
                  class="main-btn"
                  onclick="window.open('makejson.html', '_blank')">
            ğŸ§© Má»Ÿ tool MakeJSON (táº¡o Ä‘á» tráº¯c nghiá»‡m)
          </button>
        </div>

        <p style="margin-top: 16px; font-size: 13px; opacity: 0.8;">
          Gá»£i Ã½: Báº¡n cÃ³ thá»ƒ má»Ÿ tool nÃ y trong tab má»›i, sau Ä‘Ã³ copy JSON sang project hoáº·c lÃªn GitHub.
        </p>
      </section>

    </main>
  </div>

  <!-- SCRIPT cuá»‘i trang -->
  <script src="js/firebase.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/admin.js"></script>
</body>
</html>










