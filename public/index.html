<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <div style="display:flex; align-items:center; gap:15px;">
  <img src="assets/logonini.webp" alt="Logo Nini" style="height:50px; border-radius:50%; object-fit:cover;">
  <h1 style="margin:0; font-size:24px;">LearnQuest AI</h1>
</div>
  
  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
  <!-- THƯ VIỆN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
  <div class="container">

    <!-- ĐĂNG NHẬP -->
    <div id="authScreen" class="auth">
      <h2>LearnQuest AI</h2>
      <input type="email" id="email" placeholder="Email">
      <input type="password" id="password" placeholder="Mật khẩu">
      <button class="main-btn" id="signupBtn" type="button">Đăng ký</button>
	  <button class="main-btn" id="loginBtn" type="button">Đăng nhập</button>
      <p id="authMsg" style="margin-top:10px; min-height:20px; font-weight:bold;"></p>
    </div>

    <!-- ỨNG DỤNG CHÍNH -->
    <div id="mainApp" class="hidden">
      <header>
        <h1>LearnQuest AI</h1>
        <p class="subtitle">Học vui như chơi game!</p>
        <div class="user-info">
	
	<!-- NÚT CHUYỂN THEME -->
	<button id="themeToggle" class="profile-btn" style="margin-left:10px;">Dark Mode</button>

          <div class="stats">
            <div class="stat-item">XP <span id="globalXP">0</span></div>
            <div class="stat-item">Coin <span id="globalCoin">0</span></div>
            <div class="stat-item">Huy hiệu <span id="globalBadge">1</span></div>
          </div>
          <span id="userEmail">user</span>
          <button class="profile-btn" id="profileBtn">Hồ sơ</button>
          <button class="logout-btn" id="logoutBtn">Đăng xuất</button>
        </div>
      </header>

      <!-- TRẮC NGHIỆM -->
      <div id="quiz" class="quiz hidden">
        <h2>Khám Phá Tính Cách (1 lần duy nhất)</h2>
        <div class="alert" id="alert">Vui lòng trả lời <span id="missingCount">0</span> câu!</div>

        <!-- 12 CÂU HỎI ĐẦY ĐỦ -->
        <div class="question" data-q="1">
          <h3>1. Bạn thích làm gì nhất vào cuối tuần?</h3>
          <div class="options">
            <div class="option" data-score="creativity:1">Vẽ, viết truyện, làm video</div>
            <div class="option" data-score="sociability:1">Gặp bạn bè, đi chơi</div>
            <div class="option" data-score="playfulness:1">Chơi game, xem phim</div>
            <div class="option other-trigger">Khác</div>
          </div>
          <div class="other-input"><input type="text" placeholder="Bạn thích làm gì?"></div>
        </div>
        <!-- CÂU 2 -->
        <div class="question" data-q="2">
          <h3>2. Bạn học tốt nhất khi nào?</h3>
          <div class="options">
            <div class="option" data-score="perfectionism:1">Lập kế hoạch chi tiết</div>
            <div class="option" data-score="self_improvement:1">Thử thách bản thân</div>
            <div class="option" data-score="playfulness:1">Học vui như chơi</div>
          </div>
        </div>
        <!-- CÂU 3 -->
        <div class="question" data-q="3">
          <h3>3. Bạn thích làm việc nhóm hay cá nhân?</h3>
          <div class="options">
            <div class="option" data-score="sociability:1">Nhóm - năng lượng từ bạn bè</div>
            <div class="option" data-score="perfectionism:1">Cá nhân - kiểm soát 100%</div>
          </div>
        </div>
        <!-- CÂU 4 -->
        <div class="question" data-q="4">
          <h3>4. Bạn có hay đặt mục tiêu dài hạn?</h3>
          <div class="options">
            <div class="option" data-score="self_improvement:1">Luôn luôn</div>
            <div class="option" data-score="playfulness:1">Tùy hứng</div>
          </div>
        </div>
        <!-- CÂU 5 -->
        <div class="question" data-q="5">
          <h3>5. Bạn thích môn học nào nhất?</h3>
          <div class="options">
            <div class="option" data-score="competitiveness:1">Toán - giải đề khó</div>
            <div class="option" data-score="creativity:1">Văn - sáng tác</div>
            <div class="option" data-score="sociability:1">Anh - giao tiếp</div>
          </div>
        </div>
        <!-- CÂU 6 -->
        <div class="question" data-q="6">
          <h3>6. Bạn có hay so sánh mình với người khác?</h3>
          <div class="options">
            <div class="option" data-score="competitiveness:1">Rất hay</div>
            <div class="option" data-score="self_improvement:1">Chỉ để cải thiện</div>
            <div class="option" data-score="playfulness:1">Không quan tâm</div>
          </div>
        </div>
        <!-- CÂU 7 -->
        <div class="question" data-q="7">
          <h3>7. Bạn học bằng cách nào hiệu quả nhất?</h3>
          <div class="options">
            <div class="option" data-score="creativity:1">Vẽ mindmap, sơ đồ</div>
            <div class="option" data-score="sociability:1">Thảo luận nhóm</div>
            <div class="option" data-score="playfulness:1">Game, video</div>
          </div>
        </div>
        <!-- CÂU 8 -->
        <div class="question" data-q="8">
          <h3>8. Bạn có kiên trì với việc khó?</h3>
          <div class="options">
            <div class="option" data-score="self_improvement:1">Rất kiên trì</div>
            <div class="option" data-score="perfectionism:1">Chỉ khi hoàn hảo</div>
            <div class="option" data-score="playfulness:1">Dễ chán</div>
          </div>
        </div>
        <!-- CÂU 9 -->
        <div class="question" data-q="9">
          <h3>9. Bạn thích được khen vì gì?</h3>
          <div class="options">
            <div class="option" data-score="competitiveness:1">Giỏi nhất lớp</div>
            <div class="option" data-score="creativity:1">Ý tưởng độc đáo</div>
            <div class="option" data-score="sociability:1">Vui vẻ, hòa đồng</div>
          </div>
        </div>
        <!-- CÂU 10 -->
        <div class="question" data-q="10">
          <h3>10. Bạn có cảm thấy mình có thể làm được mọi thứ?</h3>
          <div class="options">
            <div class="option" data-positive="1">Có, nếu cố gắng!</div>
            <div class="option" data-positive="0.5">Thỉnh thoảng</div>
            <div class="option" data-positive="0">Không</div>
          </div>
        </div>
        <!-- CÂU 11 -->
        <div class="question" data-q="11">
          <h3>11. Bạn có hay chán khi làm 1 việc lâu?</h3>
          <div class="options">
            <div class="option" data-negative="1">Rất hay</div>
            <div class="option" data-negative="0.5">Thỉnh thoảng</div>
            <div class="option" data-negative="0">Không</div>
          </div>
        </div>
        <!-- CÂU 12 -->
        <div class="question" data-q="12">
          <h3>12. Bạn muốn được khen vì điều gì?</h3>
          <div class="options">
            <div class="option" data-score="competitiveness:1">Giỏi nhất</div>
            <div class="option" data-score="creativity:1">Sáng tạo nhất</div>
            <div class="option" data-score="sociability:1">Vui vẻ nhất</div>
            <div class="option other-trigger">Khác</div>
          </div>
          <div class="other-input"><input type="text" placeholder="Bạn muốn được khen vì gì?"></div>
        </div>

        <button id="submitBtn" class="main-btn" disabled>HOÀN TẤT → VÀO GAME</button>
      </div>

      <!-- GAME BOARD -->
      <div id="gameBoard" class="game-board hidden">
        <h2>Chọn Game Bạn Muốn Chơi!</h2>
        <p id="welcomeMsg" style="margin:20px 0; font-size:16px; color:#e11d48;"></p>
        <div class="game-grid" id="gameGrid"></div>
      </div>

      <!-- HỒ SƠ -->
      <div id="profile" class="profile hidden">
        <div class="profile-header">
          <h2>Hồ SƠ Cá Nhân</h2>
          <button class="main-btn" id="backBtn">Quay lại</button>
        </div>
        <div style="text-align:center; margin:20px 0;">
          <h3>Vector Tính Cách</h3>
          <div class="radar-container"><canvas id="radarChart"></canvas></div>
        </div>
        <div class="trait-list" id="traitList"></div>
        <div style="margin:30px 0; padding:20px; background:#f8f9fa; border-radius:15px; text-align:center;">
          <h3>Thống Kê</h3>
          <p>XP: <strong id="profileXP">0</strong> | Coin: <strong id="profileCoin">0</strong> | Huy hiệu: <strong id="profileBadge">1</strong></p>
        </div>
      </div>
    </div>
  </div>

<script>
  // === CHUYỂN THEME ===
  const themeToggle = document.getElementById("themeToggle");
  const cssLink = document.querySelector("link[rel='stylesheet']");

  let isDark = false;
  themeToggle.onclick = () => {
    isDark = !isDark;
    if (isDark) {
      cssLink.href = "dark.css";
      themeToggle.textContent = "Light Mode";
      localStorage.setItem("theme", "dark");
    } else {
      cssLink.href = "style.css";
      themeToggle.textContent = "Dark Mode";
      localStorage.setItem("theme", "light");
    }
  };

  // TỰ ĐỘNG LOAD THEME ĐÃ LƯU
  window.addEventListener("load", () => {
    const saved = localStorage.getItem("theme");
    if (saved === "dark") {
      cssLink.href = "dark.css";
      themeToggle.textContent = "Light Mode";
      isDark = true;
    }
  });
</script>
  
<!-- GỌI JS -->
  <script src="js/firebase.js"></script>
  <script src="js/main.js"></script>
</body>

</html>


