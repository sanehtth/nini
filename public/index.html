<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <div style="display:flex; align-items:center; gap:15px;">
  <img src="/assets/logonini.webp" alt="Logo Nini" style="height:50px; border-radius:50%; object-fit:cover;">
  <h1 style="margin:0; font-size:24px;">LearnQuest AI</h1>
</div>
  
  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
  <!-- THƯ VIỆN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

</head>
<body>
  <div class="container">

    <!-- ĐĂNG NHẬP -->
    <div id="authScreen" class="auth">
      <h2>LearnQuest AI</h2>
      <input type="email" id="email" placeholder="Email">
      <input type="password" id="password" placeholder="Mật khẩu">
      <button id="signupBtn" class="main-btn" type="button">Đăng ký</button>
	  <button id="loginBtn"  class="main-btn" type="button">Đăng nhập</button>
      <p id="authMsg" style="margin-top:10px; min-height:20px; font-weight:bold;"></p>
    </div>

    <!-- ỨNG DỤNG CHÍNH -->
    <div id="mainApp" class="hidden">
      <header>
        <h1>LearnQuest AI</h1>
        <p class="subtitle">Học vui như chơi game!</p>
        <div class="user-info">
	
	<!-- NÚT CHUYỂN THEME -->
	<button id="themeToggle" class="profile-btn" style="margin-left:10px;">Dark Mode</button>

          <div class="stats">
            <div class="stat-item">XP <span id="globalXP">0</span></div>
            <div class="stat-item">Coin <span id="globalCoin">0</span></div>
            <div class="stat-item">Huy hiệu <span id="globalBadge">1</span></div>
          </div>
          <span id="userEmail">user</span>
          <button class="profile-btn" id="profileBtn">Hồ sơ</button>
          <button class="logout-btn" id="logoutBtn">Đăng xuất</button>
        </div>
      </header>

 <!-- NOTE: Quiz Gate Modal — START -->
<div id="quizGateModal" class="hidden" style="position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center; z-index:9999;">
  <div style="background:#fff; width:min(520px,90%); padding:24px; border-radius:16px; box-shadow:0 10px 40px rgba(0,0,0,.2);">
    <h3 style="margin:0 0 8px 0;">Khám Phá Tính Cách</h3>
    <p id="quizGateText" style="margin:0 0 16px 0; color:#334155;"></p>
    <div style="display:flex; gap:12px; justify-content:flex-end;">
      <button id="skipQuizBtn" class="secondary-btn">Bỏ qua</button>
      <button id="goQuizBtn"  class="main-btn">Làm trắc nghiệm</button>
    </div>
  </div>
</div>
<!-- NOTE: Quiz Gate Modal — END -->

      <!-- GAME BOARD -->
      <div id="gameBoard" class="game-board hidden">
        <h2>Chọn Game Bạn Muốn Chơi!</h2>
        <p id="welcomeMsg" style="margin:20px 0; font-size:16px; color:#e11d48;"></p>
        <div class="game-grid" id="gameGrid"></div>
      </div>

      <!-- HỒ SƠ -->
      <div id="profile" class="profile hidden">
        <div class="profile-header">
          <h2>Hồ SƠ Cá Nhân</h2>
          <button class="main-btn" id="backBtn">Quay lại</button>
        </div>
        <div style="text-align:center; margin:20px 0;">
          <h3>Vector Tính Cách</h3>
          <div class="radar-container"><canvas id="radarChart"></canvas></div>
        </div>
        <div class="trait-list" id="traitList"></div>
        <div style="margin:30px 0; padding:20px; background:#f8f9fa; border-radius:15px; text-align:center;">
          <h3>Thống Kê</h3>
          <p>XP: <strong id="profileXP">0</strong> | Coin: <strong id="profileCoin">0</strong> | Huy hiệu: <strong id="profileBadge">1</strong></p>
        </div>
      </div>
    </div>
  </div>

<script>
  // === CHUYỂN THEME ===
  const themeToggle = document.getElementById("themeToggle");
  const cssLink = document.querySelector("link[rel='stylesheet']");

  let isDark = false;
  themeToggle.onclick = () => {
    isDark = !isDark;
    if (isDark) {
      cssLink.href = "dark.css";
      themeToggle.textContent = "Light Mode";
      localStorage.setItem("theme", "dark");
    } else {
      cssLink.href = "style.css";
      themeToggle.textContent = "Dark Mode";
      localStorage.setItem("theme", "light");
    }
  };

  // TỰ ĐỘNG LOAD THEME ĐÃ LƯU
  window.addEventListener("load", () => {
    const saved = localStorage.getItem("theme");
    if (saved === "dark") {
      cssLink.href = "dark.css";
      themeToggle.textContent = "Light Mode";
      isDark = true;
    }
  });
</script>
  
<!-- Firebase compat SDK (v9) -->
<script defer src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script defer src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script defer src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<!-- App scripts -->
<script defer src="/js/firebase.js"></script>
<script defer src="/js/profile.js"></script>
<script defer src="/js/game.js"></script>
<script defer src="/js/analytics.js"></script>
<!-- index.html: thêm sau firebase.js, trước main.js -->
<script src="/js/trait-config.js"></script>
<script src="/js/behavior.js"></script>
<script defer src="/js/main.js"></script>

</body>
</html>







