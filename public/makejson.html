<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>NINI – Trình tạo JSON & Manifest</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- CSS chung của site (đang dùng ở index.html) -->
  <link rel="stylesheet" href="style.css" />
  <!-- CSS riêng cho trang builder -->
  <link rel="stylesheet" href="css/makejson.css" />

  <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />
</head>
<body>
  <div class="builder-page">

    <!-- HEADER -->
    <header class="builder-header">
      <div class="builder-header-left">
        <img src="/assets/logonini.webp" alt="NINI logo" class="builder-logo" />
        <div>
          <h1 class="builder-title">Trình tạo JSON & Manifest</h1>
          <p class="builder-subtitle">
            Hệ thống build nội dung cho Nini – 6 phần / bài test – Đồng bộ GitHub
          </p>
        </div>
      </div>

      <div class="builder-header-actions">
        <button id="btnLoadSectionsManifest" class="btn secondary">
          Nạp sectionsManifest
        </button>
        <button id="btnCreateSectionsManifest" class="btn secondary">
          Tạo sectionsManifest
        </button>
        <button id="btnCreateTestsManifest" class="btn secondary">
          Tạo testsManifest
        </button>
        <button id="btnSyncGithub" class="btn primary">
          Đồng bộ lên GitHub
        </button>
        <button id="btnExportAll" class="btn ghost">
          Xuất toàn bộ dữ liệu
        </button>
      </div>
    </header>

    <main class="builder-main">
      <!-- ====== Thông tin test ====== -->
      <section class="card">
        <h2 class="card-title">Tên bài test (testName)</h2>
        <p class="hint">
          Mỗi section sẽ có chung <strong>testName</strong>. Ví dụ:
          <code>FP8 - REVIEW 1 - TEST 2</code>. Bạn dùng để nhận diện test
          trong <code>testsManifest</code>.
        </p>
        <input
          id="testName"
          type="text"
          class="input"
          placeholder="vd: FP8 - REVIEW 1 - TEST 2"
        />
        <p id="statusBar" class="status-bar">Chưa nạp manifest.</p>
      </section>

      <!-- ====== 6 PHẦN ====== -->

      <!-- Phần 1 -->
      <section class="card" data-part="1">
        <h2 class="card-title">Phần 1: Vocabulary</h2>
        <p class="card-type">type: <code>mcqOneByOne</code></p>

        <div class="field-row">
          <div class="field">
            <label for="sec1Id">ID (tự nạp từ manifest):</label>
            <input id="sec1Id" type="text" class="input" placeholder="vd: P1_001" />
          </div>
          <div class="field">
            <label for="sec1Type">section.type</label>
            <input id="sec1Type" type="text" class="input" value="mcqOneByOne" />
          </div>
        </div>

        <div class="field">
          <label for="sec1Title">Title:</label>
          <input
            id="sec1Title"
            type="text"
            class="input"
            placeholder="vd: Test 1 – Part 1 – Vocabulary"
          />
        </div>

        <div class="field">
          <label for="sec1Desc">Description (mô tả ngắn – optional):</label>
          <textarea
            id="sec1Desc"
            class="input textarea"
            placeholder="Mô tả ngắn optional..."
          ></textarea>
        </div>

        <div class="field">
          <label for="sec1Content">
            Content JSON:
            <span class="hint-inline">
              (Mỗi nội dung thô, mỗi câu 1 object:
              <code>{"question": "...", "answer": "...", ...}</code> )
            </span>
          </label>
          <textarea
            id="sec1Content"
            class="input textarea mono"
            placeholder='[{"question": "...", "answer": "..."}]'
          ></textarea>
        </div>

        <div class="section-footer">
          <button id="btnCreateJson1" class="btn small primary">
            Tạo JSON phần 1
          </button>
          <textarea
            id="sec1Output"
            class="input textarea mono output"
            readonly
            placeholder="// JSON output (Phần 1) sẽ hiện ở đây..."
          ></textarea>
        </div>
      </section>

      <!-- Phần 2 -->
      <section class="card" data-part="2">
        <h2 class="card-title">Phần 2: Grammar</h2>
        <p class="card-type">type: <code>mcqImage</code></p>

        <div class="field-row">
          <div class="field">
            <label for="sec2Id">ID:</label>
            <input id="sec2Id" type="text" class="input" placeholder="vd: P2_001" />
          </div>
          <div class="field">
            <label for="sec2Type">section.type</label>
            <input id="sec2Type" type="text" class="input" value="mcqImage" />
          </div>
        </div>

        <div class="field">
          <label for="sec2Title">Title:</label>
          <input
            id="sec2Title"
            type="text"
            class="input"
            placeholder="vd: Test 1 – Part 2 – Grammar"
          />
        </div>

        <div class="field">
          <label for="sec2Desc">Description:</label>
          <textarea id="sec2Desc" class="input textarea"></textarea>
        </div>

        <div class="field">
          <label for="sec2Content">Content JSON:</label>
          <textarea
            id="sec2Content"
            class="input textarea mono"
            placeholder='[{"question": "...", "answer": "..."}]'
          ></textarea>
        </div>

        <div class="section-footer">
          <button id="btnCreateJson2" class="btn small primary">
            Tạo JSON phần 2
          </button>
          <textarea
            id="sec2Output"
            class="input textarea mono output"
            readonly
            placeholder="// JSON output (Phần 2) sẽ hiện ở đây..."
          ></textarea>
        </div>
      </section>

      <!-- Phần 3 -->
      <section class="card" data-part="3">
        <h2 class="card-title">Phần 3: Reading</h2>
        <p class="card-type">type: <code>mcqReading</code></p>

        <div class="field-row">
          <div class="field">
            <label for="sec3Id">ID:</label>
            <input id="sec3Id" type="text" class="input" placeholder="vd: P3_001" />
          </div>
          <div class="field">
            <label for="sec3Type">section.type</label>
            <input id="sec3Type" type="text" class="input" value="mcqReading" />
          </div>
        </div>

        <div class="field">
          <label for="sec3Title">Title:</label>
          <input
            id="sec3Title"
            type="text"
            class="input"
            placeholder="vd: Test 1 – Part 3 – Reading"
          />
        </div>

        <div class="field">
          <label for="sec3Desc">Description:</label>
          <textarea id="sec3Desc" class="input textarea"></textarea>
        </div>

        <div class="field">
          <label for="sec3Content">Content JSON:</label>
          <textarea
            id="sec3Content"
            class="input textarea mono"
            placeholder='[{"passage": "...", "questions":[...]}]'
          ></textarea>
        </div>

        <div class="section-footer">
          <button id="btnCreateJson3" class="btn small primary">
            Tạo JSON phần 3
          </button>
          <textarea
            id="sec3Output"
            class="input textarea mono output"
            readonly
            placeholder="// JSON output (Phần 3) sẽ hiện ở đây..."
          ></textarea>
        </div>
      </section>

      <!-- Phần 4 -->
      <section class="card" data-part="4">
        <h2 class="card-title">Phần 4: Drag &amp; Drop</h2>
        <p class="card-type">type: <code>dragDrop</code></p>

        <div class="field-row">
          <div class="field">
            <label for="sec4Id">ID:</label>
            <input id="sec4Id" type="text" class="input" placeholder="vd: P4_001" />
          </div>
          <div class="field">
            <label for="sec4Type">section.type</label>
            <input id="sec4Type" type="text" class="input" value="dragDrop" />
          </div>
        </div>

        <div class="field">
          <label for="sec4Title">Title:</label>
          <input id="sec4Title" type="text" class="input" />
        </div>

        <div class="field">
          <label for="sec4Desc">Description:</label>
          <textarea id="sec4Desc" class="input textarea"></textarea>
        </div>

        <div class="field">
          <label for="sec4Content">Content JSON:</label>
          <textarea
            id="sec4Content"
            class="input textarea mono"
            placeholder='[{"sentence": "...", "answer": "..."}]'
          ></textarea>
        </div>

        <div class="section-footer">
          <button id="btnCreateJson4" class="btn small primary">
            Tạo JSON phần 4
          </button>
          <textarea
            id="sec4Output"
            class="input textarea mono output"
            readonly
            placeholder="// JSON output (Phần 4) sẽ hiện ở đây..."
          ></textarea>
        </div>
      </section>

      <!-- Phần 5 -->
      <section class="card" data-part="5">
        <h2 class="card-title">Phần 5: Word form</h2>
        <p class="card-type">type: <code>wordForm</code></p>

        <div class="field-row">
          <div class="field">
            <label for="sec5Id">ID:</label>
            <input id="sec5Id" type="text" class="input" placeholder="vd: P5_001" />
          </div>
          <div class="field">
            <label for="sec5Type">section.type</label>
            <input id="sec5Type" type="text" class="input" value="wordForm" />
          </div>
        </div>

        <div class="field">
          <label for="sec5Title">Title:</label>
          <input id="sec5Title" type="text" class="input" />
        </div>

        <div class="field">
          <label for="sec5Desc">Description:</label>
          <textarea id="sec5Desc" class="input textarea"></textarea>
        </div>

        <div class="field">
          <label for="sec5Content">Content JSON:</label>
          <textarea
            id="sec5Content"
            class="input textarea mono"
            placeholder='[{"sentence": "...", "answer": "..."}]'
          ></textarea>
        </div>

        <div class="section-footer">
          <button id="btnCreateJson5" class="btn small primary">
            Tạo JSON phần 5
          </button>
          <textarea
            id="sec5Output"
            class="input textarea mono output"
            readonly
            placeholder="// JSON output (Phần 5) sẽ hiện ở đây..."
          ></textarea>
        </div>
      </section>

      <!-- Phần 6 -->
      <section class="card" data-part="6">
        <h2 class="card-title">Phần 6: Reorder / Rewrite</h2>
        <p class="card-type">type: <code>reorderRewrite</code></p>

        <div class="field-row">
          <div class="field">
            <label for="sec6Id">ID:</label>
            <input id="sec6Id" type="text" class="input" placeholder="vd: P6_001" />
          </div>
          <div class="field">
            <label for="sec6Type">section.type</label>
            <input id="sec6Type" type="text" class="input" value="reorderRewrite" />
          </div>
        </div>

        <div class="field">
          <label for="sec6Title">Title:</label>
          <input id="sec6Title" type="text" class="input" />
        </div>

        <div class="field">
          <label for="sec6Desc">Description:</label>
          <textarea id="sec6Desc" class="input textarea"></textarea>
        </div>

        <div class="field">
          <label for="sec6Content">Content JSON:</label>
          <textarea
            id="sec6Content"
            class="input textarea mono"
            placeholder='[{"sentence": "...", "answer": "..."}]'
          ></textarea>
        </div>

        <div class="section-footer">
          <button id="btnCreateJson6" class="btn small primary">
            Tạo JSON phần 6
          </button>
          <textarea
            id="sec6Output"
            class="input textarea mono output"
            readonly
            placeholder="// JSON output (Phần 6) sẽ hiện ở đây..."
          ></textarea>
        </div>
      </section>

      <!-- hidden input dùng để nạp sectionsManifest từ file -->
      <input
        id="sectionsManifestFile"
        type="file"
        accept="application/json"
        style="display:none"
      />
    </main>
  </div>

  <script src="makejson.js" defer></script>
</body>
</html>

