<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>T·∫°o prompt Nh√¢n V·∫≠t ‚Äì LearnQuest AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- D√πng l·∫°i style chung -->
  <link rel="stylesheet" href="/public/green-theme.css" />
  <style>
    /* M·ªôt ch√∫t style ri√™ng cho trang character, d√πng chung tone v·ªõi site */

    .char-page-wrap {
      max-width: 960px;
      margin: 0 auto;
      background: #ffffff;
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.12);
      overflow: hidden;
    }

    .char-header {
      background: #e11d48;
      color: #fff;
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .char-header h1 {
      font-size: 20px;
      margin: 0;
    }

    .char-header a {
      color: #fee2e2;
      font-size: 13px;
      text-decoration: none;
    }

    .char-body {
      padding: 24px 24px 28px;
    }

    .char-section-title {
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 15px;
    }

    .char-help {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 8px;
    }

    .char-grid-2 {
      display: grid;
      grid-template-columns: 1.1fr 1.3fr;
      gap: 20px;
    }

    .char-field {
      margin-bottom: 12px;
    }

    .char-field label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 4px;
    }

    .char-field small {
      display: block;
      font-size: 11px;
      color: #6b7280;
      margin-top: 2px;
    }

    .char-input,
    .char-textarea {
      width: 100%;
      border-radius: 10px;
      border: 1px solid #d4d4d8;
      padding: 8px 10px;
      font-size: 13px;
      resize: vertical;
      box-sizing: border-box;
    }

    .char-textarea {
      min-height: 60px;
      line-height: 1.4;
    }

    .char-actions-row {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .char-actions-row .main-btn {
      padding-inline: 18px;
    }

    .char-json-note {
      font-size: 11px;
      color: #6b7280;
      margin-top: 4px;
    }

    .char-footer-note {
      margin-top: 12px;
      font-size: 11px;
      color: #6b7280;
    }

    .char-json-area {
      width: 100%;
      min-height: 150px;
      font-family: "Consolas","Courier New",monospace;
      font-size: 12px;
      border-radius: 10px;
      border: 1px solid #d4d4d8;
      padding: 8px 10px;
      box-sizing: border-box;
      resize: vertical;
    }

    @media (max-width: 768px) {
      .char-grid-2 {
        grid-template-columns: 1fr;
      }
      .char-body {
        padding: 18px 16px 22px;
      }
    }
  </style>
  <script src="/public/js/character.js" defer></script>
</head>
<body>
  <div class="char-page-wrap">
    <header class="char-header">
      <div>
        <a href="admin.html">&larr; V·ªÅ Admin</a>
        <h1>T·∫°o prompt Nh√¢n V·∫≠t</h1>
      </div>
      <div style="font-size:13px;">Tool t·∫°o prompt + JSON cho character sheet</div>
    </header>

    <main class="char-body">
      

  <section class="card" id="adnSection">
    <h2>K·∫øt n·ªëi ADN / character.json</h2>
    <div class="row">
      <label for="adnSeries">Ch·ªçn x√≥m (series)</label>
      <input id="adnSeries" type="text" value="xomnganchuyen" placeholder="v√≠ d·ª•: xomnganchuyen" />
      <label for="adnFileName">T√™n file ADN</label>
      <input id="adnFileName" type="text" value="XNC_characters.json" placeholder="v√≠ d·ª•: XNC_characters.json" />
      <button id="applyAdnPathBtn" type="button">T·∫°o ƒë∆∞·ªùng d·∫´n</button>
    </div>

    <div class="row">
      <label for="adnUrl">URL ho·∫∑c ƒë∆∞·ªùng d·∫´n character.json</label>
      <input id="adnUrl" type="text" value="adn/xomnganchuyen/XNC_characters.json" />
      <button id="loadAdnBtn" type="button">T·∫£i danh s√°ch</button>
    </div>
    <div class="row">
      <label for="adnCharacterSelect">Ch·ªçn nh√¢n v·∫≠t t·ª´ ADN</label>
      <select id="adnCharacterSelect">
        <option value="">(ch∆∞a t·∫£i)</option>
      </select>
      <button id="loadSelectedBtn" type="button">N·∫°p v√†o form</button>
    </div>
    <div class="row">
      <label for="importFile">Import character.json t·ª´ m√°y</label>
      <input id="importFile" type="file" accept="application/json" />
      <button id="importFileBtn" type="button">Import</button>
    </div>
    <div class="row">
      <label for="modeMerge3d">Tr∆∞·ªùng 3D (t√πy ch·ªçn)</label>
      <textarea id="char3dJson" placeholder='V√≠ d·ª•: {"modelUrl":"...","rig":"...","voice":"..."}'></textarea>
    </div>
    <p class="hint">
      G·ª£i √Ω: b·∫°n c√≥ th·ªÉ d√πng section n√†y ƒë·ªÉ qu·∫£n l√Ω c√πng l√∫c nh√¢n v·∫≠t 2D (Xom1000chuyen) v√† metadata 3D. 
      Export s·∫Ω ƒë√≥ng g√≥i trong c√πng m·ªôt object.
    </p>
  </section>

<section>
        <div class="char-section-title">Th√¥ng tin nh√¢n v·∫≠t</div>
        <p class="char-help">
          ƒêi·ªÅn c√°c field ng·∫Øn g·ªçn, sau ƒë√≥ b·∫•m <strong>"T·∫°o prompt nh√¢n v·∫≠t"</strong>.
          Prompt AI s·∫Ω xu·∫•t hi·ªán b√™n ph·∫£i, v√† b·∫°n c√≥ th·ªÉ th√™m v√†o danh s√°ch JSON ƒë·ªÉ qu·∫£n l√Ω nhi·ªÅu nh√¢n v·∫≠t.
        </p>

        <div class="char-grid-2">
          <!-- C·ªôt tr√°i: th√¥ng tin nh√¢n v·∫≠t (2D / Xom1000chuyen) -->
          <div class="char-col">
            <div class="char-form-group">
              <label for="charId">ID nh√¢n v·∫≠t *</label>
              <input id="charId" class="char-input" type="text" placeholder="Kha_001, Luna_01..." />
              <div class="char-note">N·∫øu ƒë·ªÉ tr·ªëng, tool s·∫Ω t·ª± t·∫°o ID theo timestamp.</div>
            </div>

            <div class="char-form-group">
              <label for="charName">T√™n nh√¢n v·∫≠t</label>
              <input id="charName" class="char-input" type="text" placeholder="A Kha, Luna, ..." />
            </div>

            <div class="char-form-group">
              <label for="charSummary">M√¥ t·∫£ nh√¢n v·∫≠t (th√¥)</label>
              <textarea id="charSummary" class="char-textarea" rows="3" placeholder="V√≠ d·ª•: C·∫≠u b√© t√≥c ƒëen, d√°ng ng∆∞·ªùi nh·ªè, phong c√°ch fantasy r·ª´ng t·ªëi..."></textarea>
            </div>

            <div class="char-form-group">
              <label for="charAgeRole">Tu·ªïi / vai tr√≤ (1 d√≤ng)</label>
              <input id="charAgeRole" class="char-input" type="text" placeholder="A 12‚Äì14-year-old ancient steampunk crafter boy" />
            </div>

            <div class="char-form-group">
              <label for="charAppearance">Hair / appearance</label>
              <textarea id="charAppearance" class="char-textarea" rows="3" placeholder="Long green hair, low ponytail, messy; bronze gear earring (left only)..."></textarea>
            </div>

            <div class="char-form-group">
              <label for="charOutfit">Outfit / clothing</label>
              <textarea id="charOutfit" class="char-textarea" rows="3" placeholder="Layered tunic, leather belt, worn boots, small satchel..."></textarea>
            </div>
          </div>

          <!-- C·ªôt ph·∫£i: asset + style + 3D (tu·ª≥ ch·ªçn) -->
          <div class="char-col">
            <div class="char-form-group">
              <label for="charImagePath">H√¨nh minh ho·∫° (path)</label>
              <input id="charImagePath" class="char-input" type="text" placeholder="public/assets/character/<ID>_<Name>.webp" />
              <div class="char-note">N·∫øu ƒë·ªÉ tr·ªëng, h·ªá th·ªëng s·∫Ω t·ª± t·∫°o theo ID + Name.</div>
            </div>

            <div class="char-form-group">
              <label for="charTools">Tools &amp; props</label>
              <textarea id="charTools" class="char-textarea" rows="3" placeholder="Small glowing energy core gear, mini bombs, scrolls, brass+wood hybrid tools..."></textarea>
            </div>

            <div class="char-form-group">
              <label for="charColorPalette">Color palette</label>
              <input id="charColorPalette" class="char-input" type="text" placeholder="Forest green, brown leather, antique brass, teal glow" />
            </div>

            <div class="char-form-group">
              <label for="charArtStyle">Artstyle &amp; layout</label>
              <input id="charArtStyle" class="char-input" type="text" placeholder="Anime, ancient-steampunk fantasy hybrid, detailed reference sheet" />
            </div>

            <div class="char-form-group">
              <label for="modelUrl">Tr∆∞·ªùng 3D (tu·ª≥ ch·ªçn)</label>
              <textarea id="modelUrl" class="char-textarea" rows="3" placeholder='V√≠ d·ª•:
{"modelUrl":"...","rig":"...","engine":"threejs"}'></textarea>
              <div class="char-note">G·ª£i √Ω: n·∫øu b·∫°n d√πng chung tool n√†y ƒë·ªÉ qu·∫£n l√Ω nh√¢n v·∫≠t 2D (Xom1000chuyen) v√† metadata 3D. Export s·∫Ω ƒë√≥ng g√≥i trong c√πng m·ªôt object.</div>
            </div>
          </div>
        </div>

      <div class="char-actions-row">
              <button id="buildPromptBtn" class="main-btn" type="button">
                üß™ T·∫°o prompt nh√¢n v·∫≠t
              </button>
              <button id="addToJsonBtn" class="sub-btn" type="button">
                ‚ûï Th√™m v√†o danh s√°ch JSON
              </button>
            </div>

            <p class="char-footer-note">
              * B·∫°n c√≥ th·ªÉ t·∫°o nhi·ªÅu nh√¢n v·∫≠t. M·ªói l·∫ßn b·∫•m ‚ÄúTh√™m v√†o danh s√°ch JSON‚Äù
              s·∫Ω push v√†o m·∫£ng <code>characters</code>. Sau ƒë√≥ c√≥ th·ªÉ t·∫£i xu·ªëng file
              <strong>characters.json</strong>.
            </p>

            <div class="char-actions-row" style="margin-top:6px;">
              <button id="downloadJsonBtn" class="sub-btn" type="button">
                ‚¨á T·∫£i file characters.json
              </button>
              <button id="clearJsonBtn" class="sub-btn" type="button">
                üóë Xo√° danh s√°ch JSON
              </button>
            </div>
          </div>

          <!-- C·ªôt ph·∫£i: prompt + JSON -->
          <div class="form-group">
          <label for="charImagePath">H√¨nh minh ho·∫° (path)</label>
          <input
            type="text"
            id="charImagePath"
            placeholder="public/assets/character/<ID>_<Name>.webp"
           />
          <small>N·∫øu ƒë·ªÉ tr·ªëng, h·ªá th·ªëng s·∫Ω t·ª± t·∫°o theo ID + Name.</small>
          </div>

          <div>
            <div class="char-field">
              <label for="charPromptFinal">Prompt ho√†n ch·ªânh</label>
              <textarea id="charPromptFinal" class="char-textarea" style="min-height:180px;"
                placeholder="Prompt s·∫Ω hi·ªán ·ªü ƒë√¢y sau khi b·∫•m 'T·∫°o prompt nh√¢n v·∫≠t'..."></textarea>
              <div class="char-actions-row" style="margin-top:6px;">
                <button id="copyPromptBtn" class="sub-btn" type="button">üìã Copy prompt</button>
              </div>
            </div>

            <div class="char-field">
              <label for="charJsonOutput">JSON (danh s√°ch t·∫•t c·∫£ nh√¢n v·∫≠t)</label>
              <textarea id="charJsonOutput" class="char-json-area">[]</textarea>
              <p class="char-json-note">
                C·∫•u tr√∫c m·ªói object:
                <code>{ id, name, summary, ageRole, appearance, outfit, tools, colorPalette, artStyle, prompt }</code>.
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>
</body>
</html>


