<!DOCTYPE html>

<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>XNC Prompt Generator</title>
<link href="/css/make_video.css" rel="stylesheet"/>
<link href="/green-theme.css" rel="stylesheet"/>
<style>
    body.green-theme { background-color: #e8f5e9; } /* Ná»n xanh lÃ¡ nháº¡t theo Ã½ báº¡n */
    .character-slot { border-left: 5px solid var(--secondary); padding: 15px; margin-bottom: 20px; background: #f7fff7; border-radius: 8px; position: relative; }
    .btn-remove { background: #ff4d4d; color: white; border: none; border-radius: 4px; padding: 4px 8px; cursor: pointer; float: right; }
  
.scene-card.active{outline:3px solid rgba(35,111,255,0.35); box-shadow:0 0 0 4px rgba(35,111,255,0.12);}
.pill{display:inline-flex; align-items:center; padding:6px 10px; border-radius:999px; background:rgba(0,0,0,0.06); font-weight:600;}

</style>

<style>
  .topbar{display:flex;gap:10px;align-items:center;padding:10px 12px;background:#1f2937;color:#fff;position:sticky;top:0;z-index:10}
  .tab-btn{border:1px solid rgba(255,255,255,.25);background:transparent;color:#fff;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600}
  .tab-btn.active{background:#fff;color:#111827}
  .panel{display:none}
  .panel.active{display:block}
  .story-wrap{max-width:1200px;margin:16px auto;padding:0 12px}
  .story-card{background:#fff;border-radius:14px;border:1px solid #e5e7eb;padding:14px;margin-bottom:14px}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media (max-width:900px){.grid2{grid-template-columns:1fr}}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .row input,.row select,.row textarea{width:100%}
  .btn{border:1px solid #d1d5db;background:#111827;color:#fff;padding:8px 12px;border-radius:10px;cursor:pointer}
  .btn.secondary{background:#fff;color:#111827}
  .btn.danger{background:#b91c1c}
  .muted{color:#6b7280;font-size:13px}
  .scene-card{border:1px solid #e5e7eb;border-radius:14px;padding:12px;margin:10px 0;background:#fafafa}
  .scene-head{display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
  .scene-title{font-weight:800}
  .scene-meta{font-size:13px;color:#6b7280}
  .dlg-box{margin-top:8px;padding:10px;border-radius:10px;background:#fff;border:1px solid #eee}
  .dlg-line{padding:3px 0}
  .dlg-speaker{font-weight:700}
  .sfx-line{padding:3px 0;color:#7c2d12}
  .nar-line{padding:3px 0}
  textarea.scene-raw{width:100%;border:1px solid #e5e7eb;border-radius:10px;padding:10px}
  pre#story-json-output{max-height:260px;overflow:auto;background:#0b1220;color:#e5e7eb;border-radius:12px;padding:12px}
</style>
</head>
<body class="green-theme">
<div class="topbar">
<button class="tab-btn active" id="tab-story-btn" type="button">TÃ¡ch scene &amp; thoáº¡i</button>
<button class="tab-btn" id="tab-prompt-btn" type="button">Táº¡o prompt video</button>
<div class="muted" style="margin-left:auto">XNC</div>
</div>
<section class="panel active" id="tab-story">
<div class="story-wrap">
<div class="story-card">
<div class="grid2" style="align-items:end;margin-bottom:10px">
  <div>
    <label><b>Chá»n truyá»‡n tá»« JSON (substance)</b> <span class="muted">(Ä‘á»c tá»« manifest)</span></label>
    <select id="story-select">
      <option value="">-- Chá»n truyá»‡n --</option>
    </select>
    <div class="muted" style="margin-top:6px">Manifest: <code id="manifest-path">chÆ°a load</code></div>
  </div>
  <div class="row" style="justify-content:flex-end;gap:8px">
    <button class="btn secondary" id="reload-manifest-btn" type="button">Reload manifest</button>
    <button class="btn" id="load-story-btn" type="button">Load truyá»‡n</button>
  </div>
</div>

<h2 style="margin:0 0 8px 0">TÃ¡ch scene &amp; thoáº¡i (Tab 1)</h2>
<div class="muted">Báº¡n dÃ¡n story vÃ o Ä‘Ã¢y (tá»« V19) hoáº·c náº¡p story Ä‘Ã£ lÆ°u, rá»“i báº¥m â€œTÃ¡ch Scene &amp; Thoáº¡iâ€. Sau Ä‘Ã³ export JSON thoáº¡i Ä‘á»ƒ Ä‘em qua Studio V19 táº¡o voice library.</div>
</div>
<div class="story-card">
<div class="grid2">
<div>
<label><b>ID cÃ¢u chuyá»‡n</b></label>
<input id="story-id" placeholder="VD: XNC-20251226-0004"/>
</div>
<div>
<label><b>TÃªn cÃ¢u chuyá»‡n</b></label>
<input id="story-title" placeholder="VD: BÃ i kiá»ƒm tra cuá»‘i ká»³"/>
</div>
</div>
<div style="margin-top:10px">
<label><b>Ná»™i dung</b></label>
<textarea id="story-content" placeholder="DÃ¡n story text vÃ o Ä‘Ã¢y..." rows="10"></textarea>
</div>
<div style="margin-top:10px">
<label><b>NhÃ¢n váº­t tham gia</b> <span class="muted">(chá»n Ä‘á»ƒ map thoáº¡i tá»‘t hÆ¡n)</span></label>
<input id="story-search" placeholder="TÃ¬m nhÃ¢n váº­t..."/>
<div class="row" style="margin-top:8px">
<button class="btn secondary" id="select-all-btn" type="button">Chá»n táº¥t cáº£</button>
<button class="btn secondary" id="clear-all-btn" type="button">Bá» chá»n</button>
<div class="muted" style="margin-left:auto">ÄÃ£ chá»n: <span id="count">0</span></div>
</div>
<div id="characters-container" style="margin-top:10px"></div>
</div>
<div class="row" style="margin-top:12px">
<button class="btn" id="create-story-btn" type="button">LÆ°u story (local)</button>
<button class="btn secondary" id="export-story-json-btn" type="button">Xuáº¥t JSON story</button>
<button class="btn secondary" id="save-story-file-btn" type="button">LÆ°u file .json</button>
<button class="btn" id="split-scenes-btn" type="button">TÃ¡ch Scene &amp; Thoáº¡i</button>
<button class="btn secondary" id="export-dialogue-json-btn" type="button">Export JSON thoáº¡i</button>
<button class="btn secondary" id="copy-dialogue-json-btn" type="button">Copy JSON thoáº¡i</button>
<button class="btn danger" id="clear-scenes-btn" type="button">XÃ³a preview</button>
</div>
<div style="margin-top:10px">
<b>Preview / JSON output</b>
<pre id="story-json-output">{}</pre>
</div>
<div style="margin-top:10px">
<b>Stories Ä‘Ã£ lÆ°u (Local)</b>
<div class="row" style="margin-top:6px">
<select id="story-list" style="min-width:260px"></select>
<button class="btn secondary" id="load-story-btn" type="button">Náº¡p</button>
<button class="btn danger" id="delete-story-btn" type="button">XÃ³a</button>
</div>
</div>
</div>
<div class="story-card">
<h3 style="margin:0 0 8px 0">Scene manifest (sau khi tÃ¡ch)</h3>

<div class="row" style="gap:10px; align-items:center; margin:10px 0;">
  <div class="label" style="margin:0; min-width:160px;">Äang chá»‰nh</div>
  <div id="current-scene-label" class="pill">ChÆ°a chá»n Scene</div>
  <div style="flex:1"></div>
  <button type="button" class="btn small" id="btn-prev-scene">â† Scene trÆ°á»›c</button>
  <button type="button" class="btn small" id="btn-next-scene">Scene sau â†’</button>
</div>
<div class="row" style="gap:10px; align-items:flex-start; margin:0 0 10px 0;">
  <div style="flex:1; min-width:260px;">
    <div class="label">Ghi chÃº Scene (Ä‘á»ƒ báº¡n nhá»› Ä‘ang lÃ m gÃ¬)</div>
    <textarea id="current-scene-note" rows="3" placeholder="VD: Má»¥c tiÃªu cáº£nh, cáº£m xÃºc chÃ­nh, nhá»‹p ká»ƒ, Ä‘iá»ƒm nháº¥n..."></textarea>
  </div>
  <div style="flex:1; min-width:260px;">
    <div class="label">Ghi chÃº Frame (shot hiá»‡n táº¡i trong Scene)</div>
    <textarea id="current-frame-note" rows="3" placeholder="VD: Shot cáº­n/xa, ai lÃ  focus, hÃ nh Ä‘á»™ng nhá», biá»ƒu cáº£m, Ã½ Ä‘á»“..."></textarea>
  </div>
</div>

<div id="scenes-output"></div>
</div>
</div>
</section>
<section class="panel" id="tab-prompt">
<div class="container">
<main>
<div class="card" style="text-align: center; margin-bottom: 32px;">
<h1 style="margin:0; font-size:32px; color:var(--secondary);">ğŸ¬ XNC Prompt Generator</h1>
<p class="muted">Táº¡o prompt video Ä‘a nhÃ¢n váº­t (Sane, Mira, Na, Báº¯p, MÃ­t...)</p>
</div>
<div id="characters-container"></div>
<div style="text-align: center; margin-bottom: 20px;">
<button class="btn btn-secondary" id="add-char-btn">â• ThÃªm nhÃ¢n váº­t khÃ¡c</button>
</div>
<div class="card">
<h3 style="margin-top:0;">âš™ï¸ Cáº¥u hÃ¬nh chung (Cáº£nh &amp; Camera)</h3>
<div class="section">
<div>
<label>ğŸ¥ GÃ³c mÃ¡y:</label>
<select id="camera">
<option value="EXTREME_CLOSEUP">EXTREME CLOSE-UP (Cá»±c cáº­n)</option>
<option value="CLOSEUP">CLOSE-UP (Cáº­n cáº£nh)</option>
<option value="MEDIUM_CLOSEUP">MEDIUM CLOSE-UP (Trung cáº­n)</option>
<option value="MEDIUM_SHOT">MEDIUM SHOT (Trung cáº£nh)</option>
<option value="FULL_SHOT">FULL SHOT (ToÃ n cáº£nh)</option>
<option value="WIDE_SHOT">WIDE SHOT (GÃ³c rá»™ng)</option>
<option value="POV">POV (GÃ³c nhÃ¬n nhÃ¢n váº­t)</option>
</select>
</div>
<div>
<label>ğŸ’¡ Ãnh sÃ¡ng:</label>
<select id="lighting"><option value="">-- Chá»n --</option></select>
</div>
<div>
<label>ğŸ–¼ï¸ Ná»n cáº£nh:</label>
<select id="background"><option value="">-- Chá»n --</option></select>
</div>
</div>
<div class="section">
<div>
<label>ğŸ“ Khung hÃ¬nh:</label>
<select id="aspect">
<option selected="" value="16:9">16:9 (Ngang)</option>
<option value="9:16">9:16 (Dá»c)</option>
<option value="1:1">1:1 (VuÃ´ng)</option>
</select>
</div>
</div>
</div>
<div class="card" style="margin-top:32px; position: relative;">
<h3 style="margin-top:0; color:var(--primary);">Prompt hiá»‡n táº¡i:</h3>
<div style="margin-bottom:12px; display: flex; gap: 10px;">
<input id="video-id" placeholder="ID Video" style="flex:1; padding:10px; border-radius:8px; border:1px solid var(--border);" type="text"/>
<input id="video-title" placeholder="TÃªn Video" style="flex:2; padding:10px; border-radius:8px; border:1px solid var(--border);" type="text"/>
</div>
<div id="final-prompt" style="min-height:150px; background:#1e1e1e; color:#e0e0e0; padding:16px; border-radius:12px; font-family:monospace; white-space:pre-wrap; margin-bottom:16px;">
          Äang khá»Ÿi táº¡o...
        </div>
<div style="text-align:center;">
<button class="btn btn-primary" id="generate-btn">ğŸš€ Táº¡o Prompt</button>
<button class="btn btn-secondary" id="add-btn" style="margin-left:12px;">â• LÆ°u vÃ o Danh sÃ¡ch</button>
</div>
<button class="btn btn-primary" id="copy-btn" style="position:absolute; top:12px; right:12px;">ğŸ“‹ Copy</button>
</div>
<div class="card" style="margin-top:32px;">
<div style="display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;">
<h3 style="margin:0;">Danh sÃ¡ch Ä‘Ã£ lÆ°u (<span id="count">0</span>)</h3>
<div style="display:flex; gap:10px;">
<button class="btn btn-secondary" id="export-json-btn">â¬‡ï¸ Export JSON</button>
<button class="btn btn-secondary" id="clear-all-btn" style="background:#ff4d4d; color:#fff;">ğŸ—‘ï¸ XÃ³a háº¿t</button>
</div>
</div>
<div id="prompt-list"></div>
</div>
</main>
</div>
<!-- LÆ°u Ã½: báº¡n Ä‘ang dÃ¹ng file local (make_video_bieucam (1).js). Khi deploy, Ä‘á»•i path cho Ä‘Ãºng náº¿u cáº§n. -->
</section>
<script src="make_video_bieucam_v6.js"></script>
</body>
</html>
