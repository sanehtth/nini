<!DOCTYPE html>

<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>XNC Prompt Generator</title>
<link href="/css/make_video.css" rel="stylesheet"/>
<link href="/green-theme.css" rel="stylesheet"/>
<style>
    body.green-theme { background-color: #e8f5e9; } /* N·ªÅn xanh l√° nh·∫°t theo √Ω b·∫°n */
    .character-slot { border-left: 5px solid var(--secondary); padding: 15px; margin-bottom: 20px; background: #f7fff7; border-radius: 8px; position: relative; }
    .btn-remove { background: #ff4d4d; color: white; border: none; border-radius: 4px; padding: 4px 8px; cursor: pointer; float: right; }
  </style>

<style>
  .topbar{display:flex;gap:10px;align-items:center;padding:10px 12px;background:#1f2937;color:#fff;position:sticky;top:0;z-index:10}
  .tab-btn{border:1px solid rgba(255,255,255,.25);background:transparent;color:#fff;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600}
  .tab-btn.active{background:#fff;color:#111827}
  .panel{display:none}
  .panel.active{display:block}
  .story-wrap{max-width:1200px;margin:16px auto;padding:0 12px}
  .story-card{background:#fff;border-radius:14px;border:1px solid #e5e7eb;padding:14px;margin-bottom:14px}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media (max-width:900px){.grid2{grid-template-columns:1fr}}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .row input,.row select,.row textarea{width:100%}
  .btn{border:1px solid #d1d5db;background:#111827;color:#fff;padding:8px 12px;border-radius:10px;cursor:pointer}
  .btn.secondary{background:#fff;color:#111827}
  .btn.danger{background:#b91c1c}
  .muted{color:#6b7280;font-size:13px}
  .scene-card{border:1px solid #e5e7eb;border-radius:14px;padding:12px;margin:10px 0;background:#fafafa}
  .scene-head{display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
  .scene-title{font-weight:800}
  .scene-meta{font-size:13px;color:#6b7280}
  .dlg-box{margin-top:8px;padding:10px;border-radius:10px;background:#fff;border:1px solid #eee}
  .dlg-line{padding:3px 0}
  .dlg-speaker{font-weight:700}
  .sfx-line{padding:3px 0;color:#7c2d12}
  .nar-line{padding:3px 0}
  textarea.scene-raw{width:100%;border:1px solid #e5e7eb;border-radius:10px;padding:10px}
  pre#story-json-output{max-height:260px;overflow:auto;background:#0b1220;color:#e5e7eb;border-radius:12px;padding:12px}
</style>
</head>
<body class="green-theme">
<div class="topbar">
<button class="tab-btn active" id="tab-story-btn" type="button">T√°ch scene &amp; tho·∫°i</button>
<button class="tab-btn" id="tab-prompt-btn" type="button">T·∫°o prompt video</button>
<div class="muted" style="margin-left:auto">XNC</div>
</div>
<section class="panel active" id="tab-story">
<div class="story-wrap">
<div class="story-card">
<h2 style="margin:0 0 8px 0">T√°ch scene &amp; tho·∫°i (Tab 1)</h2>
<div class="muted">B·∫°n d√°n story v√†o ƒë√¢y (t·ª´ V19) ho·∫∑c n·∫°p story ƒë√£ l∆∞u, r·ªìi b·∫•m ‚ÄúT√°ch Scene &amp; Tho·∫°i‚Äù. Sau ƒë√≥ export JSON tho·∫°i ƒë·ªÉ ƒëem qua Studio V19 t·∫°o voice library.</div>
</div>
<div class="story-card">
<div class="grid2">
<div>
<label><b>ID c√¢u chuy·ªán</b></label>
<input id="story-id" placeholder="VD: XNC-20251226-0004"/>
</div>
<div>
<label><b>T√™n c√¢u chuy·ªán</b></label>
<input id="story-title" placeholder="VD: B√†i ki·ªÉm tra cu·ªëi k·ª≥"/>
</div>
</div>
<div style="margin-top:10px">
<label><b>N·ªôi dung</b></label>
<textarea id="story-content" placeholder="D√°n story text v√†o ƒë√¢y..." rows="10"></textarea>
</div>
<div style="margin-top:10px">
<label><b>Nh√¢n v·∫≠t tham gia</b> <span class="muted">(ch·ªçn ƒë·ªÉ map tho·∫°i t·ªët h∆°n)</span></label>
<input id="story-search" placeholder="T√¨m nh√¢n v·∫≠t..."/>
<div class="row" style="margin-top:8px">
<button class="btn secondary" id="select-all-btn" type="button">Ch·ªçn t·∫•t c·∫£</button>
<button class="btn secondary" id="clear-all-btn" type="button">B·ªè ch·ªçn</button>
<div class="muted" style="margin-left:auto">ƒê√£ ch·ªçn: <span id="count">0</span></div>
</div>
<div id="characters-container" style="margin-top:10px"></div>
</div>
<div class="row" style="margin-top:12px">
<button class="btn" id="create-story-btn" type="button">L∆∞u story (local)</button>
<button class="btn secondary" id="export-story-json-btn" type="button">Xu·∫•t JSON story</button>
<button class="btn secondary" id="save-story-file-btn" type="button">L∆∞u file .json</button>
<button class="btn" id="split-scenes-btn" type="button">T√°ch Scene &amp; Tho·∫°i</button>
<button class="btn secondary" id="export-dialogue-json-btn" type="button">Export JSON tho·∫°i</button>
<button class="btn secondary" id="copy-dialogue-json-btn" type="button">Copy JSON tho·∫°i</button>
<button class="btn danger" id="clear-scenes-btn" type="button">X√≥a preview</button>
</div>
<div style="margin-top:10px">
<b>Preview / JSON output</b>
<pre id="story-json-output">{}</pre>
</div>
<div style="margin-top:10px">
<b>Stories ƒë√£ l∆∞u (Local)</b>
<div class="row" style="margin-top:6px">
<select id="story-list" style="min-width:260px"></select>
<button class="btn secondary" id="load-story-btn" type="button">N·∫°p</button>
<button class="btn danger" id="delete-story-btn" type="button">X√≥a</button>
</div>
</div>
</div>
<div class="story-card">
<h3 style="margin:0 0 8px 0">Scene manifest (sau khi t√°ch)</h3>
<div id="scenes-output"></div>
</div>
</div>
</section>
<section class="panel" id="tab-prompt">
<div class="container">
<main>
<div class="card" style="text-align: center; margin-bottom: 32px;">
<h1 style="margin:0; font-size:32px; color:var(--secondary);">üé¨ XNC Prompt Generator</h1>
<p class="muted">T·∫°o prompt video ƒëa nh√¢n v·∫≠t (Sane, Mira, Na, B·∫Øp, M√≠t...)</p>
</div>
<div id="characters-container"></div>
<div style="text-align: center; margin-bottom: 20px;">
<button class="btn btn-secondary" id="add-char-btn">‚ûï Th√™m nh√¢n v·∫≠t kh√°c</button>
</div>
<div class="card">
<h3 style="margin-top:0;">‚öôÔ∏è C·∫•u h√¨nh chung (C·∫£nh &amp; Camera)</h3>
<div class="section">
<div>
<label>üé• G√≥c m√°y:</label>
<select id="camera">
<option value="EXTREME_CLOSEUP">EXTREME CLOSE-UP (C·ª±c c·∫≠n)</option>
<option value="CLOSEUP">CLOSE-UP (C·∫≠n c·∫£nh)</option>
<option value="MEDIUM_CLOSEUP">MEDIUM CLOSE-UP (Trung c·∫≠n)</option>
<option value="MEDIUM_SHOT">MEDIUM SHOT (Trung c·∫£nh)</option>
<option value="FULL_SHOT">FULL SHOT (To√†n c·∫£nh)</option>
<option value="WIDE_SHOT">WIDE SHOT (G√≥c r·ªông)</option>
<option value="POV">POV (G√≥c nh√¨n nh√¢n v·∫≠t)</option>
</select>
</div>
<div>
<label>üí° √Ånh s√°ng:</label>
<select id="lighting"><option value="">-- Ch·ªçn --</option></select>
</div>
<div>
<label>üñºÔ∏è N·ªÅn c·∫£nh:</label>
<select id="background"><option value="">-- Ch·ªçn --</option></select>
</div>
</div>
<div class="section">
<div>
<label>üìê Khung h√¨nh:</label>
<select id="aspect">
<option selected="" value="16:9">16:9 (Ngang)</option>
<option value="9:16">9:16 (D·ªçc)</option>
<option value="1:1">1:1 (Vu√¥ng)</option>
</select>
</div>
</div>
</div>
<div class="card" style="margin-top:32px; position: relative;">
<h3 style="margin-top:0; color:var(--primary);">Prompt hi·ªán t·∫°i:</h3>
<div style="margin-bottom:12px; display: flex; gap: 10px;">
<input id="video-id" placeholder="ID Video" style="flex:1; padding:10px; border-radius:8px; border:1px solid var(--border);" type="text"/>
<input id="video-title" placeholder="T√™n Video" style="flex:2; padding:10px; border-radius:8px; border:1px solid var(--border);" type="text"/>
</div>
<div id="final-prompt" style="min-height:150px; background:#1e1e1e; color:#e0e0e0; padding:16px; border-radius:12px; font-family:monospace; white-space:pre-wrap; margin-bottom:16px;">
          ƒêang kh·ªüi t·∫°o...
        </div>
<div style="text-align:center;">
<button class="btn btn-primary" id="generate-btn">üöÄ T·∫°o Prompt</button>
<button class="btn btn-secondary" id="add-btn" style="margin-left:12px;">‚ûï L∆∞u v√†o Danh s√°ch</button>
</div>
<button class="btn btn-primary" id="copy-btn" style="position:absolute; top:12px; right:12px;">üìã Copy</button>
</div>
<div class="card" style="margin-top:32px;">
<div style="display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;">
<h3 style="margin:0;">Danh s√°ch ƒë√£ l∆∞u (<span id="count">0</span>)</h3>
<div style="display:flex; gap:10px;">
<button class="btn btn-secondary" id="export-json-btn">‚¨áÔ∏è Export JSON</button>
<button class="btn btn-secondary" id="clear-all-btn" style="background:#ff4d4d; color:#fff;">üóëÔ∏è X√≥a h·∫øt</button>
</div>
</div>
<div id="prompt-list"></div>
</div>
</main>
</div>
<!-- L∆∞u √Ω: b·∫°n ƒëang d√πng file local (make_video_bieucam (1).js). Khi deploy, ƒë·ªïi path cho ƒë√∫ng n·∫øu c·∫ßn. -->
</section>
<script src="make_video_bieucam_v6.js"></script>
</body>
</html>
